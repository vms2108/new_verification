<div class="table">
  <h1 class="table__title">{{ "Identification history" | translate : lang }}</h1>
  <div class="table__filters">
    <div class="form-items" [formGroup]="filterGroup">
      <div class="table__filters table-filters">
        <label class="table-filters__input">
          <input formControlName="search" type="text" placeholder="{{ 'User' | translate:lang }}" autocomplete="off">
        </label>

        <div class="table-filters__calendar">
          <span>{{ 'from' | translate:lang }}</span>
          <div class="table-filters__datepicker">
            <mat-form-field>
              <input
                matInput
                [matDatepicker]="datesFrom"
                [min]="pickerMin"
                [max]="pickerMax"
                formControlName="datesFrom"
              >
              <mat-datepicker-toggle matSuffix [for]="datesFrom"></mat-datepicker-toggle>
              <mat-datepicker #datesFrom disabled="false"></mat-datepicker>
            </mat-form-field>
          </div>
          <span>{{ 'to' | translate:lang }}</span>
          <div class="table-filters__datepicker">
            <mat-form-field>
              <input
                matInput
                [matDatepicker]="datesTo"
                [min]="pickerMin"
                [max]="pickerMax"
                formControlName="datesTo"
              >
              <mat-datepicker-toggle matSuffix [for]="datesTo"></mat-datepicker-toggle>
              <mat-datepicker #datesTo disabled="false"></mat-datepicker>
            </mat-form-field>
          </div>

        </div>

        <div class="table-filters__select table-filters__select--mr">
          <mat-form-field>
            <mat-select formControlName="reason" placeholder="{{'Reason' | translate:lang }}" multiple>
              <mat-option *ngFor="let reason of reasons; let i = index;" [value]="reason.value">{{ reason.name | translate:lang }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="table-filters__select table-filters__select--mr">
          <mat-form-field>
            <mat-select formControlName="result" placeholder="{{'Result' | translate:lang }}" multiple>
              <mat-option *ngFor="let result of results; let i = index;" [value]="result">{{ result | translate:lang }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
  </div>

  <div class="table__container">
    <table mat-table [dataSource]="dataSource" matSort>
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
        <td mat-cell *matCellDef="let row">{{ row.id }} </td>
      </ng-container>
      <ng-container matColumnDef="user_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ "User" | translate : lang }} </th>
        <td mat-cell *matCellDef="let row">ID: {{ row.user_id }}, {{row.user_name}} {{row.user_surname}} </td>
      </ng-container>
      <ng-container matColumnDef="reason">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ "Identification reason" | translate : lang }} </th>
        <td mat-cell *matCellDef="let row"> {{row.reason | reason | translate:lang }} </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ "Identification date" | translate : lang }} </th>
        <td mat-cell *matCellDef="let row"><span *ngIf="row.result !== 'waiting'">{{row.date | date : 'dd.MM.yyyy'}}</span></td>
      </ng-container>
      <ng-container matColumnDef="result">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ "Result" | translate : lang }} </th>
        <td mat-cell *matCellDef="let row"> {{row.result | translate:lang }} </td>
      </ng-container>
      <ng-container matColumnDef="details">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row" >
          <button mat-button>{{ "Learn More" | translate : lang }}</button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="{{row.result | status }}"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
  </div>
</div>
